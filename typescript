const existingSubscription = await ctx.db
  .query("subscriptions")
  .withIndex("by_user", (q) => q.eq("userId", user._id))
  .first();